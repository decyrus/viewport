{"version":3,"sources":["./dist/viewport.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","viewport","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","1","Jvent","decouple","orientation","win","doc","document","docEl","documentElement","Viewport","calculateDeviceDimensions","refresh","eventHandler","bind","prototype","eve","emit","type","calculateDimensions","calculateScroll","calculateOffset","calculateOrientation","device","height","screen","width","clientHeight","clientWidth","cachedTop","scrollY","cachedBottom","bottom","pageYOffset","scrollX","pageXOffset","body","scrollHeight","top","right","left","inViewport","el","getBoundingClientRect","isVisible","jvent","o9n","2","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","callback","setTimeout","node","event","fn","tracking","captureEvent","track","update","addEventListener","3","on","listener","_collection","push","once","that","off","apply","arguments","listeners","j","undefined","splice","removeAllListeners","args","slice","shift","len","4","Promise","ScreenOrientation","onchange","createOrientation","install","orientationMap","90","-90","0","180","found","findDelegate","delegate","dispatchEvent","removeEventListener","lock","getLock","unlock","getUnlock","or","Object","defineProperties","get","set","cb","wrapCallback","msOrientation","mozOrientation","getMql","matches","angle","value","fnName","delegateContext","eventName","delegated","Array","actualEvent","getOrientationChangeEvent","wrapped","addTrackedListener","removeTrackedListener","trackedListeners","originalListeners","original","idx","indexOf","idx2","evt","target","defineValue","currentTarget","err","delegateFn","msLockOrientation","mozLockOrientation","lockType","resolve","reject","msUnlockOrientation","mozUnlockOrientation","events","onorientationchange","createOwnDelegate","name","props","orientationChangeEvt","Event","ownDelegate","create","forEach","mql","addListener","matchMedia","obj","key","val","defineProperty"],"mappings":"CAAA,SAAUA,GAAG,SAAUC,WAAU,gBAAiBC,UAAS,YAAY,CAACA,OAAOD,QAAQD,QAAS,UAAUG,UAAS,YAAYA,OAAOC,IAAI,CAACD,UAAUH,OAAO,CAAC,GAAIK,EAAE,UAAUC,UAAS,YAAY,CAACD,EAAEC,WAAY,UAAUC,UAAS,YAAY,CAACF,EAAEE,WAAY,UAAUC,QAAO,YAAY,CAACH,EAAEG,SAAS,CAACH,EAAEI,KAAKJ,EAAEK,SAAWV,OAAO,WAAW,GAAIG,GAAOD,EAAOD,CAAQ,OAAO,YAAY,QAASU,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEhB,GAAG,IAAIa,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIC,GAAE,kBAAmBC,UAASA,OAAQ,KAAIlB,GAAGiB,EAAE,MAAOA,GAAED,GAAG,EAAG,IAAGG,EAAE,MAAOA,GAAEH,GAAG,EAAG,IAAII,GAAE,GAAIC,OAAM,uBAAuBL,EAAE,IAAK,MAAMI,GAAEE,KAAK,mBAAmBF,EAAE,GAAIG,GAAEV,EAAEG,IAAIf,WAAYW,GAAEI,GAAG,GAAGQ,KAAKD,EAAEtB,QAAQ,SAASU,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,GAAGF,IAAIY,EAAEA,EAAEtB,QAAQU,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGf,QAAQ,IAAI,GAAIkB,GAAE,kBAAmBD,UAASA,QAAQF,EAAE,EAAEA,EAAEF,EAAEW,OAAOT,IAAID,EAAED,EAAEE,GAAI,OAAOD,GAAE,MAAOJ,OAAOe,GAAG,SAASR,EAAQhB,EAAOD,GAIx1B,GAAI0B,GAAQT,EAAQ,QACpB,IAAIU,GAAWV,EAAQ,WACvB,IAAIW,GAAcX,EAAQ,OAAOW,WAKjC,IAAIC,GAAMxB,MACV,IAAIyB,GAAMD,EAAIE,QACd,IAAIC,GAAQF,EAAIG,eAKhB,SAASC,KACP1B,KAAK2B,2BACL3B,MAAK4B,SACLT,GAAStB,OAAQ,SAAUG,KAAK6B,aAAaC,KAAK9B,MAClDmB,GAAStB,OAAQ,SAAUG,KAAK6B,aAAaC,KAAK9B,MAClD,OAAOA,MAMT0B,EAASK,UAAY,GAAIb,EAKzBQ,GAASK,UAAUF,aAAe,QAASA,GAAaG,GAEtDhC,KAAK4B,SAEL5B,MAAKiC,KAAKD,EAAIE,MAMhBR,GAASK,UAAUH,QAAU,QAASA,KACpC5B,KAAKmC,qBACLnC,MAAKoC,iBACLpC,MAAKqC,iBACLrC,MAAKsC,sBACL,OAAOtC,MAQT0B,GAASK,UAAUJ,0BAA4B,QAASA,KACtD3B,KAAKuC,SACLvC,MAAKuC,OAAOC,OAASnB,EAAIoB,OAAOD,MAChCxC,MAAKuC,OAAOG,MAAQrB,EAAIoB,OAAOC,KAC/B1C,MAAKuC,OAAOnB,YAAcA,EAAYc,IACtC,OAAOlC,MAMT0B,GAASK,UAAUI,oBAAsB,QAASA,KAChDnC,KAAKwC,OAAShB,EAAMmB,YACpB3C,MAAK0C,MAAQlB,EAAMoB,WACnB,OAAO5C,MAMT0B,GAASK,UAAUK,gBAAkB,QAASA,KAC5C,GAAIS,GAAY7C,KAAK8C,OACrB,IAAIC,GAAe/C,KAAKwC,OAASK,CACjC,IAAIG,EAEJhD,MAAK8C,QAAUzB,EAAI4B,WACnBjD,MAAKkD,QAAU7B,EAAI8B,WACnBH,GAAShD,KAAKwC,OAASxC,KAAK8C,OAE5B,IAAID,IAAc7C,KAAK8C,SAAW9C,KAAK8C,UAAY,EAAG,CACpD9C,KAAKiC,KAAK,WACL,IAAIc,IAAiBC,GAAUA,GAAU1B,EAAI8B,KAAKC,aAAc,CACrErD,KAAKiC,KAAK,UAEZ,MAAOjC,MAMT0B,GAASK,UAAUM,gBAAkB,QAASA,KAC5CrC,KAAKsD,IAAMtD,KAAK8C,OAChB9C,MAAKuD,MAAQvD,KAAKkD,QAAUlD,KAAK0C,KACjC1C,MAAKgD,OAAShD,KAAK8C,QAAU9C,KAAKwC,MAClCxC,MAAKwD,KAAOxD,KAAKkD,OACjB,OAAOlD,MAOT0B,GAASK,UAAUO,qBAAuB,QAASA,KACjDtC,KAAKuC,OAAOnB,YAAcA,EAAYc,IACtC,OAAOlC,MAMT0B,GAASK,UAAU0B,WAAa,QAASA,GAAWC,GAClD,GAAIxD,GAAIwD,EAAGC,uBACX,OAAQzD,GAAEoD,KAAO,GAAOpD,EAAEqD,OAASvD,KAAK0C,OAChCxC,EAAE8C,QAAUhD,KAAKwC,QAAYtC,EAAEsD,MAAQ,EAMjD9B,GAASK,UAAU6B,UAAY,QAASA,GAAUF,GAChD,GAAIxD,GAAIwD,EAAGC,uBACX,OAAQzD,GAAE8C,QAAU,GAAK9C,EAAEoD,KAAOtD,KAAKwC,OAMzC/C,GAAOD,QAAU,GAAIkC,KAElBP,SAAW,EAAE0C,MAAQ,EAAEC,IAAM,IAAIC,GAAG,SAAStD,EAAQhB,EAAOD,GAC/D,YAEA,IAAIwE,GAAoB,WACtB,MAAOnE,QAAOoE,uBACZpE,OAAOqE,6BACP,SAAUC,GACRtE,OAAOuE,WAAWD,EAAU,IAAO,QAErCrC,KAAKjC,OAET,SAASsB,GAASkD,EAAMC,EAAOC,GAC7B,GAAIvC,GACAwC,EAAW,KAEf,SAASC,GAAatE,GACpB6B,EAAM7B,CACNuE,KAGF,QAASA,KACP,IAAKF,EAAU,CACbR,EAAiBW,EACjBH,GAAW,MAIf,QAASG,KACPJ,EAAGxD,KAAKsD,EAAMrC,EACdwC,GAAW,MAGbH,EAAKO,iBAAiBN,EAAOG,EAAc,MAE3C,OAAOA,GAMThF,EAAOD,QAAU2B,OAEX0D,GAAG,SAASpE,EAAQhB,EAAOD,GACjC,YAEA,SAAS0B,MAiBTA,EAAMa,UAAU+C,GAAK,SAASR,EAAOS,GACnC/E,KAAKgF,YAAchF,KAAKgF,eACxBhF,MAAKgF,YAAYV,GAAStE,KAAKgF,YAAYV,MAC3CtE,MAAKgF,YAAYV,GAAOW,KAAKF,EAC7B,OAAO/E,MAeTkB,GAAMa,UAAUmD,KAAO,SAAUZ,EAAOS,GACtC,GAAII,GAAOnF,IAEX,SAASuE,KACPY,EAAKC,IAAId,EAAOC,EAChBQ,GAASM,MAAMrF,KAAMsF,WAGvBf,EAAGQ,SAAWA,CAEd/E,MAAK8E,GAAGR,EAAOC,EAEf,OAAOvE,MAmBTkB,GAAMa,UAAUqD,IAAM,SAAUd,EAAOS,GAErC,GAAIQ,GAAYvF,KAAKgF,aAAehF,KAAKgF,YAAYV,GACjDkB,EAAI,CAER,IAAID,IAAcE,UAAW,CAC3B,IAAKD,EAAGA,EAAID,EAAUvE,OAAQwE,GAAK,EAAG,CACpC,GAAID,EAAUC,KAAOT,GAAYQ,EAAUC,GAAGT,WAAaA,EAAU,CACnEQ,EAAUG,OAAOF,EAAG,EACpB,QAIJ,GAAID,EAAUvE,SAAW,EAAG,CAC1BhB,KAAK2F,mBAAmBrB,IAI5B,MAAOtE,MAaTkB,GAAMa,UAAU4D,mBAAqB,SAAUrB,GAC7CtE,KAAKgF,YAAchF,KAAKgF,sBACjBhF,MAAKgF,YAAYV,EACxB,OAAOtE,MAaTkB,GAAMa,UAAUwD,UAAY,SAAUjB,GACpCtE,KAAKgF,YAAchF,KAAKgF,eACxB,OAAOhF,MAAKgF,YAAYV,GAc1BpD,GAAMa,UAAUE,KAAO,WACrB,GAAIjC,KAAKgF,cAAgBS,UAAW,CAClC,MAAOzF,MAGT,GAAI4F,MAAUC,MAAM9E,KAAKuE,UAAW,GAChChB,EAAQsB,EAAKE,QACbP,EAAYvF,KAAKgF,YAAYV,GAC7B/D,EAAI,EACJwF,CAEJ,IAAIR,EAAW,CACbA,EAAYA,EAAUM,MAAM,EAC5BE,GAAMR,EAAUvE,MAChB,KAAKT,EAAGA,EAAIwF,EAAKxF,GAAK,EAAG,CACvBgF,EAAUhF,GAAG8E,MAAMrF,KAAM4F,IAI7B,MAAO5F,MAMTP,GAAOD,QAAU0B,OAEX8E,GAAG,SAASvF,EAAQhB,EAAOD,GACjC,YAEA,UAAWK,SAAU,SAAU,CAC7B,KAAM,IAAIe,OAAM,wCAGlB,GAAI6B,GAAS5C,OAAO4C,MACpB,IAAIwD,GAAUpG,OAAOoG,OAErB,IAAI7E,EAGJ,UAAWvB,QAAOqG,oBAAsB,YACtCzD,EAAOrB,sBAAuB8E,0BACvBzD,GAAOrB,YAAYwD,kBAAoB,YAC9CnC,EAAOrB,YAAY+E,WAAa,YACzB1D,GAAOrB,YAAYc,OAAS,SAAU,CAC7Cd,EAAcqB,EAAOrB,gBAChB,CACLA,EAAcgF,IAGhB3G,EAAOD,SACL4B,YAAaA,EACbiF,QAAS,QAASA,KAChB,SAAWxG,QAAOqG,oBAAsB,YACtCzD,EAAOrB,sBAAuB8E,mBAAmB,CACjD,MAAOzD,GAAOrB,YAEhBvB,OAAO4C,OAAOrB,YAAcA,CAC5B,OAAOA,IAIX,SAASgF,KACP,GAAIE,IACFC,GAAM,oBACNC,MAAO,sBACPC,EAAK,mBACLC,IAAO,qBAGT,IAAIC,GAAQC,GAEZ,SAASV,MACTA,EAAkBnE,UAAU6C,iBAAmBiC,EAAS,mBAAoBF,EAAME,SAAUF,EAAMrC,MAClG4B,GAAkBnE,UAAU+E,cAAgBD,EAAS,gBAAiBF,EAAME,SAAUF,EAAMrC,MAC5F4B,GAAkBnE,UAAUgF,oBAAsBF,EAAS,sBAAuBF,EAAME,SAAUF,EAAMrC,MACxG4B,GAAkBnE,UAAUiF,KAAOC,GACnCf,GAAkBnE,UAAUmF,OAASC,GAErC,IAAIC,GAAK,GAAIlB,EAEbmB,QAAOC,iBAAiBF,GACtBjB,UACEoB,IAAK,WACH,MAAOZ,GAAME,SAAS,KAAOF,EAAMrC,QAAU,MAE/CkD,IAAK,SAAUC,GACbd,EAAME,SAAS,KAAOF,EAAMrC,OAASoD,EAAaD,KAGtDvF,MACEqF,IAAK,WACH,MAAO9E,GAAOkF,eAAiBlF,EAAOmF,gBACpCtB,EAAezG,OAAOuB,YAAc,MACnCyG,IAASC,QAAU,oBAAsB,sBAGhDC,OACEC,MAAO,IAIX,OAAOZ,GAGT,QAASP,GAAUoB,EAAQC,EAAiBC,GAC1C,MAAO,SAASC,KACd,GAAIxC,GAAOyC,MAAMtG,UAAU8D,MAAM9E,KAAKuE,UACtC,IAAIgD,GAAc1C,EAAK,GAAG1D,KAAO0D,EAAK,GAAG1D,KAAO0D,EAAK,EACrD,IAAI0C,IAAgB,SAAU,CAC5B,OAEF,GAAI1C,EAAK,GAAG1D,KAAM,CAChB0D,EAAK,GAAK2C,EAA0BJ,EAAWvC,EAAK,QAC/C,CACLA,EAAK,GAAKuC,EAEZ,GAAIK,GAAUd,EAAa9B,EAAK,GAChC,IAAIqC,IAAW,mBAAoB,CACjCQ,EAAmB7C,EAAK,GAAI4C,GAE9B,GAAIP,IAAW,sBAAuB,CACpCS,EAAsB9C,EAAK,IAE7BA,EAAK,GAAK4C,CACV,OAAON,GAAgBD,GAAQ5C,MAAM6C,EAAiBtC,IAI1D,GAAI+C,KACJ,IAAIC,KAEJ,SAASH,GAAmBI,EAAUL,GACpC,GAAIM,GAAMF,EAAkBG,QAAQF,EACpC,IAAIC,GAAO,EAAG,CACZH,EAAiBG,GAAON,MACnB,CACLI,EAAkB3D,KAAK4D,EACvBF,GAAiB1D,KAAKuD,IAI1B,QAASE,GAAsBG,GAC7B,GAAIG,GAAOJ,EAAkBG,QAAQF,EACrC,IAAIG,GAAQ,EAAG,CACbJ,EAAkBlD,OAAOsD,EAAM,EAC/BL,GAAiBjD,OAAOsD,EAAM,IAIlC,QAAStB,GAAaD,GACpB,GAAIqB,GAAMF,EAAkBG,QAAQtB,EACpC,IAAIqB,GAAO,EAAG,CACZ,MAAOH,GAAiBG,GAE1B,MAAO,SAASN,GAASS,GACvB,GAAIA,EAAIC,SAAW9H,EAAa,CAC9B+H,EAAYF,EAAK,SAAU7H,GAE7B,GAAI6H,EAAIG,gBAAkBhI,EAAa,CACrC+H,EAAYF,EAAK,gBAAiB7H,GAEpC,GAAI6H,EAAI/G,OAAS,SAAU,CACzBiH,EAAYF,EAAK,OAAQ,UAE3BxB,EAAGwB,IAIP,QAAShC,KACP,GAAIoC,GAAM,oDACV,IAAIC,EACJ,UAAW7G,GAAO8G,mBAAqB,WAAY,CACjDD,EAAa7G,EAAO8G,kBAAkBzH,KAAKW,OACtC,UAAWA,GAAO+G,oBAAsB,WAAY,CACzDF,EAAa7G,EAAO+G,mBAAmB1H,KAAKW,OACvC,CACL6G,EAAa,WAAc,MAAO,QAGpC,MAAO,SAAStC,GAAKyC,GACnB,GAAIH,EAAWG,GAAW,CACxB,MAAOxD,GAAQyD,QAAQD,OAClB,CACL,MAAOxD,GAAQ0D,OAAO,GAAI/I,OAAMyI,MAKtC,QAASlC,KACP,MAAO1E,GAAOrB,aAAeqB,EAAOrB,YAAY8F,OAAOpF,KAAKW,EAAOrB,cACjEqB,EAAOmH,qBAAuBnH,EAAOmH,oBAAoB9H,KAAKW,IAC9DA,EAAOoH,sBAAwBpH,EAAOoH,qBAAqB/H,KAAKW,IAChE,QAASyE,KAAY,QAGzB,QAASN,KACP,GAAIkD,IAAU,oBAAqB,uBAAwB,sBAE3D,KAAK,GAAIvJ,GAAI,EAAGA,EAAIuJ,EAAO9I,OAAQT,IAAK,CACtC,GAAIkC,EAAO,KAAOqH,EAAOvJ,MAAQ,KAAM,CACrC,OACEsG,SAAUpE,EACV6B,MAAOwF,EAAOvJ,KAKpB,SAAWV,QAAOkK,qBAAuB,YAAa,CACpD,OACElD,SAAUhH,OACVyE,MAAO,qBAIX,OACEuC,SAAUmD,IACV1F,MAAO,UAIX,QAASiE,GAA2B0B,EAAMC,GACxC,GAAIC,EAEJ,KACEA,EAAuB,GAAIC,OAAMH,EAAMC,GACvC,MAAO/J,GACPgK,GAAyBjI,KAAM,UAEjC,MAAOiI,GAGT,QAASH,KACP,GAAIK,GAAchD,OAAOiD,QACvB1F,iBAAkB,QAASA,GAAkBqE,EAAKxB,GAChD,IAAKzH,KAAKuF,UAAU0D,GAAM,CACxBjJ,KAAKuF,UAAU0D,MAEjB,GAAIjJ,KAAKuF,UAAU0D,GAAKF,QAAQtB,MAAS,EAAG,CAC1CzH,KAAKuF,UAAU0D,GAAKhE,KAAKwC,KAG7BX,cAAe,QAASA,GAAemC,GACrC,IAAKjJ,KAAKuF,UAAU0D,EAAI/G,MAAO,CAC7B,OAEFlC,KAAKuF,UAAU0D,EAAI/G,MAAMqI,QAAQ,SAAUhG,GACzCA,EAAG0E,IAEL,UAAW7H,GAAY+E,UAAY,WAAY,CAC7C/E,EAAY+E,SAAS8C,KAGzBlC,oBAAqB,QAASA,GAAqBkC,EAAKxB,GACtD,IAAKzH,KAAKuF,UAAU0D,GAAM,CACxB,OAEF,GAAIH,GAAM9I,KAAKuF,UAAU0D,GAAKF,QAAQtB,EACtC,IAAIqB,GAAO,EAAG,CACZ9I,KAAKuF,UAAU0D,GAAKvD,OAAOoD,EAAK,MAKtCuB,GAAY9E,YAEZ,IAAIiF,GAAM3C,GAEV,IAAI2C,SAAcA,GAAI1C,UAAY,UAAW,CAC3C0C,EAAIC,YAAY,WACdJ,EAAYvD,cAAcyB,EAA0B,aAIxD,MAAO8B,GAGT,QAASxC,KACP,SAAWhI,QAAO6K,YAAc,WAAY,CAC1C,SAEF,MAAO7K,QAAO6K,WAAW,4BAG3B,QAASvB,GAAYwB,EAAKC,EAAKC,GAC7BxD,OAAOyD,eAAeH,EAAKC,GACzB5C,MAAO6C,eAIA,IAAI","file":"./dist/viewport.min.js"}